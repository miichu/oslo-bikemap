"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.isDateInRange = exports.isMatch = void 0;
const isSameDay_1 = __importDefault(require("date-fns/isSameDay"));
const isDate_1 = __importDefault(require("date-fns/isDate"));
const differenceInCalendarDays_1 = __importDefault(require("date-fns/differenceInCalendarDays"));
const isSameMonth_1 = __importDefault(require("date-fns/isSameMonth"));
const react_day_picker_1 = require("react-day-picker");
function isDateType(value) {
    return (0, isDate_1.default)(value);
}
function isArrayOfDates(value) {
    return Array.isArray(value) && value.every(isDate_1.default);
}
function isMatch(day, matchers) {
    return matchers.some((matcher) => {
        if (isDateType(matcher)) {
            return (0, isSameMonth_1.default)(day, matcher);
        }
        if (isArrayOfDates(matcher)) {
            return matcher.some((matcherDay) => {
                return (0, isSameMonth_1.default)(matcherDay, day);
            });
        }
        if ((0, react_day_picker_1.isDateRange)(matcher)) {
            return isDateInRange(day, matcher);
        }
        if ((0, react_day_picker_1.isDateAfterType)(matcher)) {
            return ((0, isSameMonth_1.default)(day, matcher.after) ||
                (0, differenceInCalendarDays_1.default)(day, matcher.after) > 0);
        }
        if ((0, react_day_picker_1.isDateBeforeType)(matcher)) {
            return ((0, isSameMonth_1.default)(day, matcher.before) ||
                (0, differenceInCalendarDays_1.default)(matcher.before, day) > 0);
        }
        if (typeof matcher === "function") {
            return matcher(day);
        }
        return false;
    });
}
exports.isMatch = isMatch;
function isDateInRange(date, range) {
    let { from, to } = range;
    if (!from) {
        return false;
    }
    if (!to && (0, isSameDay_1.default)(from, date)) {
        return true;
    }
    if (!to) {
        return false;
    }
    const isToBeforeFrom = (0, differenceInCalendarDays_1.default)(to, from) < 0;
    if (to && isToBeforeFrom) {
        [from, to] = [to, from];
    }
    if ((0, isSameMonth_1.default)(from, date) || (0, isSameMonth_1.default)(to, date)) {
        return true;
    }
    return ((0, differenceInCalendarDays_1.default)(date, from) >= 0 &&
        (0, differenceInCalendarDays_1.default)(to, date) >= 0);
}
exports.isDateInRange = isDateInRange;
